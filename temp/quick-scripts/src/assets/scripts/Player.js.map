{"version":3,"sources":["assets\\scripts\\Player.js"],"names":["cc","Class","Component","properties","jumpHeight","jumpDuration","maxMoveSpeed","accel","jumpAudio","type","AudioClip","runJumpAction","jumpUp","tween","by","y","easing","jumpDown","sequence","call","playJumpAudio","repeatForever","audioEngine","playEffect","onLoad","jumpAction","node","then","start","accLeft","accRight","xSpeed","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onkeyDown","KEY_UP","onkeyUp","event","console","log","keyCode","macro","KEY","a","d","onDestry","off","EvenType","update","dt","Math","abs","x"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n      jumpHeight:0,\r\n      jumpDuration:0,\r\n      maxMoveSpeed:0,\r\n      accel:0,\r\n      jumpAudio:{\r\n        default:null,\r\n        type:cc.AudioClip\r\n      }\r\n   \r\n    },\r\n\r\n    runJumpAction () {\r\n        // 跳跃上升\r\n        var jumpUp = cc.tween().by(this.jumpDuration, {y: this.jumpHeight}, {easing: 'sineOut'});\r\n        // 下落\r\n        var jumpDown = cc.tween().by(this.jumpDuration, {y: -this.jumpHeight}, {easing: 'sineIn'});\r\n\r\n        // 创建一个缓动，按 jumpUp、jumpDown 的顺序执行动作\r\n        var tween = cc.tween().sequence(jumpUp, jumpDown).call(this.playJumpAudio,this);\r\n        // 不断重复\r\n        return cc.tween().repeatForever(tween);\r\n    },\r\n\r\n    playJumpAudio:function(){\r\n        cc.audioEngine.playEffect(this.jumpAudio,false);\r\n    },\r\n\r\n    onLoad () {\r\n        var jumpAction = this.runJumpAction()\r\n        cc.tween(this.node).then(jumpAction).start()\r\n\r\n        this.accLeft = false;\r\n        this.accRight = false;\r\n\r\n        this.xSpeed = 0;\r\n\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onkeyDown,this)\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onkeyUp,this)\r\n\r\n\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    onkeyDown(event){\r\n\r\n        console.log(\"onKeyDown\");\r\n        console.log(event.keyCode)\r\n        \r\n        switch(event.keyCode){\r\n            case cc.macro.KEY.a:\r\n            case 37:\r\n                this.accLeft = true;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n            case 39:\r\n                this.accRight = true;\r\n                break;\r\n        }\r\n    },\r\n\r\n    onkeyUp(event){\r\n        console.log(\"onKeyUp\");\r\n        console.log(event.keyCode)\r\n\r\n        switch(event.keyCode){\r\n            case cc.macro.KEY.a:\r\n            case 37:\r\n                this.accLeft = false;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n            case 39:\r\n                this.accRight = false;\r\n                break;\r\n        }\r\n    },\r\n\r\n    onDestry(){\r\n        cc.systemEvent.off(cc.SystemEvent.EvenType.KEY_DOWN,this.onkeyDown,this)\r\n        cc.systemEvent.off(cc.SystemEvent.EvenType.KEY_UP,this.onkeyUp,this)\r\n    },\r\n\r\n\r\n    update (dt) {\r\n        if(this.accLeft){\r\n            this.xSpeed -=this.accel*dt;\r\n        }else if(this.accRight){\r\n            this.xSpeed += this.accel*dt;\r\n        }\r\n\r\n        if(Math.abs(this.xSpeed)>this.maxMoveSpeed){\r\n            this.xSpeed = this.maxMoveSpeed* this.xSpeed/Math.abs(this.xSpeed)\r\n        }\r\n\r\n        this.node.x +=this.xSpeed*dt;\r\n\r\n    },\r\n});\r\n"]}