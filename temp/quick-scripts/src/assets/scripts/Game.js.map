{"version":3,"sources":["assets\\scripts\\Game.js"],"names":["cc","Class","Component","properties","starPrefab","type","Prefab","maxStarDuration","minStarDuration","ground","Node","player","scoreDisplay","Label","scoreAudio","AudioClip","onLoad","groundY","y","height","createNewStar","score","newStar","instantiate","node","addChild","setPosition","getNewStarPosition","getComponent","game","randX","randY","Math","random","jumpHeight","maxX","width","starDuration","timer","v2","getScore","string","console","info","audioEngine","playEffect","start","update","dt","gameOver","stopAllActions","director","loadScene"],"mappings":";;;;;;AAAA;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,UAAU,EAAC;AACP,iBAAQ,IADD;AAEPC,MAAAA,IAAI,EAACL,EAAE,CAACM;AAFD,KADH;AAMRC,IAAAA,eAAe,EAAC,CANR;AAORC,IAAAA,eAAe,EAAC,CAPR;AASRC,IAAAA,MAAM,EAAC;AACH,iBAAQ,IADL;AAEHJ,MAAAA,IAAI,EAACL,EAAE,CAACU;AAFL,KATC;AAcRC,IAAAA,MAAM,EAAC;AACH,iBAAQ,IADL;AAEHN,MAAAA,IAAI,EAACL,EAAE,CAACU;AAFL,KAdC;AAmBRE,IAAAA,YAAY,EAAC;AACT,iBAAQ,IADC;AAETP,MAAAA,IAAI,EAACL,EAAE,CAACa;AAFC,KAnBL;AAwBRC,IAAAA,UAAU,EAAC;AACP,iBAAQ,IADD;AAEPT,MAAAA,IAAI,EAACL,EAAE,CAACe;AAFD;AAxBH,GAHP;AAmCL;AAEAC,EAAAA,MArCK,oBAqCK;AACN,SAAKC,OAAL,GAAe,KAAKR,MAAL,CAAYS,CAAZ,GAAgB,KAAKT,MAAL,CAAYU,MAAZ,GAAmB,CAAlD;AAEA,SAAKC,aAAL;AAEA,SAAKC,KAAL,GAAY,CAAZ;AACH,GA3CI;AA6CLD,EAAAA,aAAa,EAAC,yBAAU;AACpB,QAAIE,OAAO,GAAGtB,EAAE,CAACuB,WAAH,CAAe,KAAKnB,UAApB,CAAd;AACA,SAAKoB,IAAL,CAAUC,QAAV,CAAmBH,OAAnB;AACAA,IAAAA,OAAO,CAACI,WAAR,CAAoB,KAAKC,kBAAL,EAApB;AAEAL,IAAAA,OAAO,CAACM,YAAR,CAAqB,MAArB,EAA6BC,IAA7B,GAAoC,IAApC;AACH,GAnDI;AAqDLF,EAAAA,kBAAkB,EAAC,8BAAU;AACzB,QAAIG,KAAK,GAAG,CAAZ;AACA,QAAIC,KAAK,GAAG,KAAKd,OAAL,GAAee,IAAI,CAACC,MAAL,KAAe,KAAKtB,MAAL,CAAYiB,YAAZ,CAAyB,QAAzB,EAAmCM,UAAjE,GAA8E,EAA1F;AACA,QAAIC,IAAI,GAAG,KAAKX,IAAL,CAAUY,KAAV,GAAgB,CAA3B;AACAN,IAAAA,KAAK,GAAG,CAACE,IAAI,CAACC,MAAL,KAAc,GAAf,IAAoB,CAApB,GAAsBE,IAA9B;AAEA,SAAKE,YAAL,GAAqB,KAAK7B,eAAL,GAAsBwB,IAAI,CAACC,MAAL,MAAe,KAAK1B,eAAL,GAAuB,KAAKC,eAA3C,CAA3C;AACA,SAAK8B,KAAL,GAAa,CAAb;AAEA,WAAOtC,EAAE,CAACuC,EAAH,CAAMT,KAAN,EAAYC,KAAZ,CAAP;AACH,GA/DI;AAiELS,EAAAA,QAAQ,EAAC,oBAAU;AACf,SAAKnB,KAAL,IAAa,CAAb;AACA,SAAKT,YAAL,CAAkB6B,MAAlB,GAA2B,YAAU,KAAKpB,KAA1C;AACAqB,IAAAA,OAAO,CAACC,IAAR,CAAa,MAAb;AACA3C,IAAAA,EAAE,CAAC4C,WAAH,CAAeC,UAAf,CAA0B,KAAK/B,UAA/B,EAA0C,KAA1C;AACH,GAtEI;AAwELgC,EAAAA,KAxEK,mBAwEI,CAER,CA1EI;AA4ELC,EAAAA,MA5EK,kBA4EGC,EA5EH,EA4EO,CACR;AACA;AACA;AACA;AAEA;AAEH,GApFI;AAsFLC,EAAAA,QAAQ,EAAC,oBAAU;AACf,SAAKtC,MAAL,CAAYuC,cAAZ;AAEAlD,IAAAA,EAAE,CAACmD,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH;AA1FI,CAAT","sourceRoot":"/","sourcesContent":["//https://docs.cocos.com/creator/2.4/manual/zh/getting-started/quick-start.html  教程\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        starPrefab:{\r\n            default:null,\r\n            type:cc.Prefab\r\n        },\r\n\r\n        maxStarDuration:0,\r\n        minStarDuration:0,\r\n\r\n        ground:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n\r\n        player:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        \r\n        scoreDisplay:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n\r\n        scoreAudio:{\r\n            default:null,\r\n            type:cc.AudioClip\r\n        }\r\n    \r\n    },\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.groundY = this.ground.y + this.ground.height/2;\r\n\r\n        this.createNewStar();\r\n\r\n        this.score =0;\r\n    },\r\n\r\n    createNewStar:function(){\r\n        var newStar = cc.instantiate(this.starPrefab);\r\n        this.node.addChild(newStar);\r\n        newStar.setPosition(this.getNewStarPosition());\r\n\r\n        newStar.getComponent('Star').game = this;\r\n    },\r\n\r\n    getNewStarPosition:function(){\r\n        var randX = 0;\r\n        var randY = this.groundY + Math.random()* this.player.getComponent('Player').jumpHeight + 50;\r\n        var maxX = this.node.width/2;\r\n        randX = (Math.random()-0.5)*2*maxX\r\n\r\n        this.starDuration  = this.minStarDuration +Math.random()*(this.maxStarDuration - this.minStarDuration);\r\n        this.timer = 0;\r\n\r\n        return cc.v2(randX,randY)\r\n    },\r\n\r\n    getScore:function(){\r\n        this.score +=1;\r\n        this.scoreDisplay.string = 'Score: '+this.score;\r\n        console.info(\"播放声音\");\r\n        cc.audioEngine.playEffect(this.scoreAudio,false);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update (dt) {\r\n        // if(this.timer > this.starDuration){\r\n        //     this.gameOver();\r\n        //     return ;\r\n        // }\r\n\r\n        // this.timer +=dt;\r\n\r\n    },\r\n\r\n    gameOver:function(){\r\n        this.player.stopAllActions();\r\n\r\n        cc.director.loadScene('game');\r\n    }\r\n});\r\n"]}